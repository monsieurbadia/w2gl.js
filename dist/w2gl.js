(function () {function b(a){return a&&a.__esModule?{d:a.default}:{d:a}}var e={};var q,k={};!function(){function e(e){return e&&e.__esModule?{d:e.default}:{d:e}}var r={};function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function n(r){for(var n=1;n<arguments.length;n++){var c=null!=arguments[n]?arguments[n]:{};n%2?t(Object(c),!0).forEach(function(t){e(o).d(r,t,c[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):t(Object(c)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(c,e))})}return r}var o={};o=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e};var c={keys2Array:function(e){return Object.keys(n({},e)).map(function(e){return e})},keysValue2Array:function(e){return Object.keys(n({},e)).map(function(r){return e[r]})}},i=function(e){throw new Error(e)},u=Object.freeze({set required(e){i(e)},get required(){i("required parameter")}}),a=function(e){return Object.keys(e).forEach(function(r){return e[r].hasOwnProperty(r)||!Object.isFrozen(e[r])?a(e[r]):e[r]}),Object.freeze(e)};function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){e(o).d(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}var O=function(e){return Array.isArray(e)},p={array:O,exist:function(e){return Object.keys(s({},e)).length>0},empty:function(e){return!Object.keys(s({},e)).length},include:function(e,r){return O(e)?e.includes(r):void 0!==Object.keys(s({},e)).find(function(e){return e===r})}},b={};b=function(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n};var y={};y=function(e){if(Array.isArray(e))return b(e)};var d={};d=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)};var j={};j=function(e,r){if(e){if("string"==typeof e)return b(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(e,r):void 0}};var l={};l=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var g;g=function(e){return y(e)||d(e)||j(e)||l()};function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function P(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){e(o).d(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}var h=window.navigator.userAgent,m=a({convert:c,debounce:function(e,r){var t;return function(n){window.clearTimeout(t),t=window.setTimeout(e(n),r)}},fail:u,frozen:a,is:p,loop:function(r,t){return e(g).d(r).forEach(function(e,r,n){return t(e,r,n)})},merge:function(r,t){return function(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){e(o).d(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}({},r,{},t)},oftype:function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},pipe:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e){return[].concat(r).reduce(function(e,r){return r(e)},e||Object.create(null))}},ratio169:function(e){return Math.round(e/16*9)},reducer:function(r,t){return Object.keys(P({},r)).reduce(function(n,c){return P({},n,e(o).d({},c,t(r[c])))},r)},ua:{android:function(e){return /Android/.test(h)},egde:function(e){return /Edge/.test(h)&&window.MSStream},ie:function(e){return /MSIE/.test(h)&&window.MSStream},ios:function(e){return /iPad|iPhone|iPod/.test(h)&&!window.MSStream},phone:function(e){return /iPhone|iPod|Android/.test(h)}},uniqid:function(e){return"".concat(Math.random().toString(36).substr(2,9))},"\u03C0":{degrees:function(e){return e/Math.PI*180},radians:function(e){return e*Math.PI/180},distance:function(e,r){var t=r.x-e.x,n=r.y-e.y;return Math.sqrt(t*t+n*n)},randomize:{float:function(e,r){return Math.random()*(r-e)+e},int:function(e,r){return Math.floor(Math.random()*(r-e))+e}}}});r.default=m,r=m,"object"==typeof k?k=r:"function"==typeof q&&q.amd?q(function(){return r}):this.u3s=r}();var ja=Object.freeze({mousemoveList:[],renderList:[],resizeList:[]}),ga=["mousemove","resize"],a=Object.freeze({LIST:ja,LISTENERS:ga});var ca=Object.freeze({v2:"Vector2",v3:"Vector3",v4:"Vector4"}),$=Object.freeze(["v2","v3","v4"]),w=Object.freeze({PRIMITIVES:ca,TYPES:$});var i=Object.freeze({TYPE:{color:{name:"#include <core_color>",template:"",type:"fragment"},vertex:{name:"#include <core_vertex>",template:"",type:"vertex"},fragment:{name:"#include <core_fragment>",template:"",type:"fragment"}},UNIFORMS:{mouse:{type:"v2",value:[]},resolution:{type:"v2",value:[window.innerWidth,window.innerHeight]},time:{type:"f",value:1}}});var j=function(e){return"function"==typeof e&&a.LIST.mousemoveList.push(e)};var y=function(r){return"function"==typeof r&&a.LIST.renderList.push(r)};var f=function(e){return"function"==typeof e&&a.LIST.resizeList.push(e)};var n=function(e){return a.LIST.mousemoveList.forEach(function(r){return r(e)})},o=function(e){return a.LIST.resizeList.forEach(function(r){return r(e)})},p=[["mousemove",n],["resize",o]],M=function(e){return p.forEach(function(e){return window.removeEventListener(e[0],e[1],!1)})},K=function(e){return p.forEach(function(e){return window.addEventListener(e[0],e[1],!1)})},J=Object.freeze(function(){return Object.assign(this,{onmousemove:j,onresize:f,clear:M,init:K,mousemove:n,resize:o})});function t(t){var $=t.clientX,e=t.clientY,i=t.pageX,s=t.pageY,o=$||i,r=e||s;this.x=o||this.x,this.y=r||this.y}var A=function(){this.x=0,this.y=0,this.move=t.bind(this)};var U=function(i){var e=i.target;this.width=e.innerWidth,this.height=e.innerHeight},z=function(){this.width=window.innerWidth,this.height=window.innerHeight,this.resize=U.bind(this)};function x(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(e);r&&($=$.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,$)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?x(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var h={};function B(r,a){(null==a||a>r.length)&&(a=r.length);for(var $=0,e=new Array(a);$<a;$++)e[$]=r[$];return e}h=B;var C={};function D(r){if(Array.isArray(r))return h(r)}C=D;var E={};function F(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}E=F;var G={};function H(r,a){if(r){if("string"==typeof r)return h(r,a);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?h(r,a):void 0}}G=H;var I={};function pa(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}I=pa;var g={};function L(r){return C(r)||E(r)||G(r)||I()}g=L;var c={};function N(e,r,$){return r in e?Object.defineProperty(e,r,{value:$,enumerable:!0,configurable:!0,writable:!0}):e[r]=$,e}c=N;var O=function(e,r){return d({},e,{},r)},P=function(e,r){return Object.keys(d({},r)).reduce(function(t,$){var u=r[$];if(w.TYPES.includes(u.type)){var n,a=u.type,o=u.value,i=w.PRIMITIVES[a];var $Fhqp$$interop$default=b(g);u.value=new e[i],o.length>0&&(n=u.value).set.apply(n,$Fhqp$$interop$default.d(o))}var $IxO8$$interop$default=b(c);return d({},t,$IxO8$$interop$default.d({},$,u))},{})},Q=function(e){return Object.keys(e).reduce(function(r,t){var $=i.TYPE[t.replace(/Shader/,"")];if($){var u=e["".concat($.type,"Shader")];var $IxO8$$interop$default=b(c);return d({},r,$IxO8$$interop$default.d({},t,u.includes($.name)?u.replace($.name,$.template):u))}var $IxO8$$interop$default=b(c);return d({},r,$IxO8$$interop$default.d({},t,e[t]))},{})},R=function(e,r){return this.uniforms=P(e,O(i.UNIFORMS,r.uniforms)),this.fragmentShader=r.fragment,this.vertexShader=r.vertex,Object.assign(this,Q(this))};var S=function(){this.time+=this.speed},T=function(){return this.speed=.05,this.time=0,Object.assign(this,{render:S})};function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function V(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var W={current:{size:[window.innerWidth,window.innerHeight],type:"perspective"}},X=function(e,r){var t;var $Fhqp$$interop$default=b(g);return(null==r?void 0:r.length)>0&&(t=e.position).set.apply(t,$Fhqp$$interop$default.d(r))},Y=function(e){return Object.assign(new e.Camera,{init:X})},Z=function(e){return V({},e,{camera:k.reducer(W,function(r){return Y(e.THREE,r)})})};function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var aa=function(e,r){var t=new R(e,r),o=new e.ShaderMaterial(t),$=new e.PlaneBufferGeometry(2,2),n=new e.Mesh($,o);return Object.assign(n,{onmousemove:j,onresize:f,onrender:y})},ba=function(e){return _({},e,{shader:k.reducer(e.shader,function(r){return aa(e.THREE,r)})})};function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function da(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var ea={current:{option:{antialias:!0,pixelRatio:window.devicePixelRatio,size:[window.innerWidth,window.innerHeight]}}},fa=function(e,r,t){e.current={camera:t,scene:r},s(e)},s=function(e,r){return e.setAnimationLoop(null!==r?function(r){e.timer.render(),a.LIST.renderList.forEach(function(r){return r(e.timer)}),e.render(e.current.scene,e.current.camera)}:null)},ha=function(e,r){var t=new e.WebGLRenderer({antialias:!0});var $Fhqp$$interop$default=b(g);return t.setClearColor(0),t.setPixelRatio(window.devicePixelRatio),t.setSize.apply(t,$Fhqp$$interop$default.d(r.option.size).concat([!0])),t.timer=new T,window.document.body.appendChild(t.domElement),Object.assign(t,{onresize:f,init:fa,setTimerAnimationLoop:s})},ia=function(e){return da({},e,{renderer:k.reducer(ea,function(r){return ha(e.THREE,r)})})};function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function ka(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var la={current:{}},ma=function(e,r){return r.forEach(function(r){return e.add(r)})},na=function(e){return Object.assign(new e.Scene,{init:ma})},oa=function(e){return ka({},e,{scene:k.reducer(la,function(r){return na(e.THREE,r)})})};console.log(k.is);var r=Object.freeze({init:function(r,e){var t,$,n;r.THREE||(k.is.required="required THREE instance");var i=[oa,Z,ia,ba],o=k.pipe.apply(void 0,i),c=Object.assign(o(r),{events:new J,mouse:new A,screen:new z});return Object.keys(c.shader).forEach(function(r){var e;null===(e=c.scene)||void 0===e||e.current.init(c.scene.current,[c.shader[r]])}),null===(t=c.events)||void 0===t||t.init(),null===($=c.camera)||void 0===$||$.current.init(c.camera.current,[0,0,-1]),null===(n=c.renderer)||void 0===n||n.current.init(c.renderer.current,c.scene.current,c.camera.current),e?e(c):c}});e.default=r,e=r;if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e}else if(typeof define==="function"&&define.amd){define(function(){return e})}else{this["w2gl"]=e}})();