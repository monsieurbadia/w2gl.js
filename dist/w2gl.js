(function () {function b(a){return a&&a.__esModule?{d:a.default}:{d:a}}var e={};var ia=Object.freeze({mousemoveList:[],renderList:[],resizeList:[]}),L=["mousemove","resize"],a=Object.freeze({LIST:ia,LISTENERS:L});var la=Object.freeze({v2:"Vector2",v3:"Vector3",v4:"Vector4"}),t=Object.freeze(["v2","v3","v4"]),m=Object.freeze({PRIMITIVES:la,TYPES:t});var n=Object.freeze({TYPE:{color:{name:"#include <core_color>",template:"",type:"fragment"},vertex:{name:"#include <core_vertex>",template:"",type:"vertex"},fragment:{name:"#include <core_fragment>",template:"",type:"fragment"}},UNIFORMS:{mouse:{type:"v2",value:[]},resolution:{type:"v2",value:[window.innerWidth,window.innerHeight]},time:{type:"f",value:1}}});var p=function(e){return"function"==typeof e&&a.LIST.mousemoveList.push(e)};var I=function(r){return"function"==typeof r&&a.LIST.renderList.push(r)};var h=function(e){return"function"==typeof e&&a.LIST.resizeList.push(e)};var r=function(e){return a.LIST.mousemoveList.forEach(function(r){return r(e)})},i=function(e){return a.LIST.resizeList.forEach(function(r){return r(e)})},k=[["mousemove",r],["resize",i]],K=function(e){return k.forEach(function(e){return window.removeEventListener(e[0],e[1],!1)})},S=function(e){return k.forEach(function(e){return window.addEventListener(e[0],e[1],!1)})},V=Object.freeze(function(){return Object.assign(this,{onmousemove:p,onresize:h,clear:K,init:S,mousemove:r,resize:i})});function W(t){var $=t.clientX,e=t.clientY,i=t.pageX,s=t.pageY,o=$||i,r=e||s;this.x=o||this.x,this.y=r||this.y}var X=function(){this.x=0,this.y=0,this.move=W.bind(this)};var aa=function(i){var e=i.target;this.width=e.innerWidth,this.height=e.innerHeight},ea=function(){this.width=window.innerWidth,this.height=window.innerHeight,this.resize=aa.bind(this)};function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(e);r&&($=$.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,$)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var g={};function z(r,a){(null==a||a>r.length)&&(a=r.length);for(var $=0,e=new Array(a);$<a;$++)e[$]=r[$];return e}g=z;var A={};function B(r){if(Array.isArray(r))return g(r)}A=B;var C={};function D(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}C=D;var E={};function F(r,a){if(r){if("string"==typeof r)return g(r,a);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?g(r,a):void 0}}E=F;var G={};function H(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}G=H;var j={};function J(r){return A(r)||C(r)||E(r)||G()}j=J;var c={};function ra(e,r,$){return r in e?Object.defineProperty(e,r,{value:$,enumerable:!0,configurable:!0,writable:!0}):e[r]=$,e}c=ra;var M=function(e,r){return d({},e,{},r)},N=function(e,r){return Object.keys(d({},r)).reduce(function(t,$){var u=r[$];if(m.TYPES.includes(u.type)){var n,a=u.type,o=u.value,i=m.PRIMITIVES[a];var $Fhqp$$interop$default=b(j);u.value=new e[i],o.length>0&&(n=u.value).set.apply(n,$Fhqp$$interop$default.d(o))}var $IxO8$$interop$default=b(c);return d({},t,$IxO8$$interop$default.d({},$,u))},{})},O=function(e){return Object.keys(e).reduce(function(r,t){var $=n.TYPE[t.replace(/Shader/,"")];if($){var u=e["".concat($.type,"Shader")];var $IxO8$$interop$default=b(c);return d({},r,$IxO8$$interop$default.d({},t,u.includes($.name)?u.replace($.name,$.template):u))}var $IxO8$$interop$default=b(c);return d({},r,$IxO8$$interop$default.d({},t,e[t]))},{})},P=function(e,r){return this.uniforms=N(e,M(n.UNIFORMS,r.uniforms)),this.fragmentShader=r.fragment,this.vertexShader=r.vertex,Object.assign(this,O(this))};var Q=function(){this.time+=this.speed},R=function(){return this.speed=.05,this.time=0,Object.assign(this,{render:Q})};function q(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function T(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?q(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var U=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return function(r){return[].concat(e).reduce(function(r,e){return e(r)},r||{})}};function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var f=function(e,r){return Object.keys(e).reduce(function(t,o){var $IxO8$$interop$default=b(c);return u({},t,$IxO8$$interop$default.d({},o,r(u({},e[o]))))},{})};var Y={current:{size:[window.innerWidth,window.innerHeight],type:"perspective"}},Z=function(e,r){var t;var $Fhqp$$interop$default=b(j);return(null==r?void 0:r.length)>0&&(t=e.position).set.apply(t,$Fhqp$$interop$default.d(r))},$=function(e){return Object.assign(new e.Camera,{init:Z})},_=function(e){return T({},e,{camera:f(Y,function(r){return $(e.THREE,r)})})};function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ba(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var ca=function(e,r){var t=new P(e,r),o=new e.ShaderMaterial(t),$=new e.PlaneBufferGeometry(2,2),n=new e.Mesh($,o);return Object.assign(n,{onmousemove:p,onresize:h,onrender:I})},da=function(e){return ba({},e,{shader:f(e.shader,function(r){return ca(e.THREE,r)})})};function w(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function fa(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?w(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var ga={current:{option:{antialias:!0,pixelRatio:window.devicePixelRatio,size:[window.innerWidth,window.innerHeight]}}},ha=function(e,r,t){e.current={camera:t,scene:r},x(e)},x=function(e,r){return e.setAnimationLoop(null!==r?function(r){e.timer.render(),a.LIST.renderList.forEach(function(r){return r(e.timer)}),e.render(e.current.scene,e.current.camera)}:null)},ja=function(e,r){var t=new e.WebGLRenderer({antialias:!0});var $Fhqp$$interop$default=b(j);return t.setClearColor(0),t.setPixelRatio(window.devicePixelRatio),t.setSize.apply(t,$Fhqp$$interop$default.d(r.option.size).concat([!0])),t.timer=new R,window.document.body.appendChild(t.domElement),Object.assign(t,{onresize:h,init:ha,setTimerAnimationLoop:x})},ka=function(e){return fa({},e,{renderer:f(ga,function(r){return ja(e.THREE,r)})})};function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function ma(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach(function(r){var $IxO8$$interop$default=b(c);$IxO8$$interop$default.d(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var na={current:{}},oa=function(e,r){return r.forEach(function(r){return e.add(r)})},pa=function(e){return Object.assign(new e.Scene,{init:oa})},qa=function(e){return ma({},e,{scene:f(na,function(r){return pa(e.THREE,r)})})};var o=Object.freeze({init:function(r,e){var t,$,n,i,o=[qa,_,ka,da];if(!r.THREE)throw new Error("required THREE instance");var c=U.apply(void 0,o),u=Object.assign(c(r),{events:new V,mouse:new X,screen:new ea});return Object.keys(u.shader).forEach(function(r){var e,t;null===(e=u.scene)||void 0===e||e.current.init(null===(t=u.scene)||void 0===t?void 0:t.current,[u.shader[r]])}),null===(t=u.events)||void 0===t||t.init(),null===($=u.camera)||void 0===$||$.current.init(u.camera.current,[0,0,-1]),null===(n=u.renderer)||void 0===n||n.current.init(null===(i=u.renderer)||void 0===i?void 0:i.current,u.scene.current,u.camera.current),e?e(u):u}});e.default=o,e=o;if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e}else if(typeof define==="function"&&define.amd){define(function(){return e})}else{this["w2gl"]=e}})();